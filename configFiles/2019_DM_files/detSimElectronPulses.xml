<?xml version="1.0" encoding="UTF-8"?>
<TestRecoConfig xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="reco/CCMRecoConfig.xsd">

  <!--
  <Modules type="Reco"> CCMPMTResponse CCMTimeShift CCMBuildAccumWaveform CCMFindEvents CCMFindEvents CCMNa22Cuts CCMNa22Cuts </Modules>
  <ModuleVersion> default default default dynamic dynamic_pulseCut lengthCut waveformCut </ModuleVersion>

  <Modules type="Reco"> CCMBuildAccumWaveform CCMFindEvents CCMFindEvents </Modules>
  <ModuleVersion> default dynamic dynamic_pulseCut </ModuleVersion>

  <Modules type="Reco"> CCMNa22Cuts CCMNa22Cuts </Modules>
  <ModuleVersion> lengthCut waveformCut </ModuleVersion>

  <Modules type="Reco"> CCMQuenchingFactor CCMPMTResponse CCMTimeShift </Modules>
  <ModuleVersion> default default default </ModuleVersion>

  <Modules type="Reco"> CCMNa22Cuts </Modules>
  <ModuleVersion> lengthCut </ModuleVersion>

  <Modules type="Reco"> CCMBuildAccumWaveform CCMFindEvents </Modules>
  <ModuleVersion> default dynamic </ModuleVersion>

  <Modules type="Reco"> CCMNa22Cuts </Modules>
  <ModuleVersion> lengthCut </ModuleVersion>

  -->

  <Modules type="Reco"> CCMQuenchingFactor CCMPMTResponse CCMTimeShift CCMBuildAccumWaveform CCMFindEvents CCMNa22Cuts </Modules>
  <ModuleVersion> electron default default default dynamic lengthCut </ModuleVersion>

  <Config name="ROOTSetup" version="default">
    <Param name="ReadBranches"><string>mcTruth pulses events</string>
      The branches to read in options are
      - events
      - rawData
      - pulses
      - mcTruth
      - all
      - none
    </Param>
    <Param name="SaveBranches"><string>mcTruth pulses events</string>
      The branches to read in options are
      - events
      - rawData
      - pulses
      - mcTruth
      - all
      - none
    </Param>
  </Config>

  <Config name="PMTMapSetup" version="default">
    <Param name="MappingFile"><string>default</string>
      The PMT mapping file to read in. If default is passed the files in $CCMPROJECT/calibrationFiles/2019/mapping_master* will be used
      Must be the first param in this config
    </Param>
    <Param name="HVOffFile"><string>default</string>
      List of the HV channels that are off.
      default is $CCMPROJECT/calibrationFiles/2019/hv_off_2019.csv
    </Param>
    <Param name="CalibrationFile"><string>default</string>
      Name of the calibration file to use
      default is $CCMPROJECT/calibrationFiles/2019/root_out_2019ledData_run179_legFix_integral_all_round4_.root
    </Param>
  </Config>

  <Config name = "CCMQuenchingFactor" version = "nucleon">
    <Param name="RANSEED"><int>123456789</int>
      The random seed to use for the random number generator
      If 0, a random seed will be used
    </Param>
    <Param name="QF"><double>0.272244</double>
      Quenching factor to apply, should be between 0 and 1
      0.272244 +- 0.0350413 for NR
      Set to 1 for ER
    </Param>
  </Config>

  <Config name = "CCMQuenchingFactor" version = "electron">
    <Param name="RANSEED"><int>123456789</int>
      The random seed to use for the random number generator
      If 0, a random seed will be used
    </Param>
    <Param name="QF"><double>1</double>
      Quenching factor to apply, should be between 0 and 1
      About 0.25 for NR
      Set to 1 for ER
    </Param>
  </Config>

  <Config name="CCMPMTResponse" version="default">
    <Param name="RANSEED"><int>123456789</int>
      The random seed to use for the random number generator
      If 0, a random seed will be used
    </Param>
    <Param name="QE"><double>0.2</double>
      The quantum efficiency of the PMTs default is 0.2
    </Param>
    <Param name="HighEnergy"><double>4.0</double>
      The highest energy optical photon seen by the PMTs (in units of eV)
    </Param>
    <Param name="LowEnergy"><double>2.0</double>
      The lowest energy optical photon seen by the PMTs (in units of eV)
    </Param>
    <Param name="WaveformRepresentation"><string>default</string>
      The representation to use for the "raw" MC waveform options are
      - default: default is currently set to the triangle options
      - triangle
      - square
    </Param>
    <Param name="PMTSPEFile"><string>/usr/projects/w20_ccm_lanl/calibrationFiles/2019/from_mayank/pulse_length_vs_pulse_integral_run182_rename.root</string>
      The file name to grab 2D integral vs length distributions
      if 0, it is assume a relationship is the same for all PMTs
    </Param>
    <Param name="PMTRelEff"><string>/usr/projects/w20_ccm_lanl/calibrationFiles/2019/led_integrals_average.txt</string>
      if 0, it is assume a relationship is the same for all PMTs
    </Param>
  </Config>

  <Config name = "CCMTimeShift" version = "default">
    <Param name="RANSEED"><int>123456789</int>
      The random seed to use for the random number generator
      If 0, a random seed will be used
    </Param>
    <Param name="TimingDist"><string>beamPi0</string>
      The timing distribution to sample from options:
      - default: default is currently set to beamPi0 option
      - beamPi0
      - beamPipm
      - beamMupm
      - uniform
    </Param>
    <Param name="StartNS"><double>-526</double>
      The time in nanoseconds where the timing distributions starts
    </Param>
    <Param name="EndNS"><double>6080</double>
      The time in nanoseconds where the timing distribution ends
      if TimeDist is a beam option then the ending time will be set
      to the end of the DAQ window reguarless of what is inputed here
    </Param>
    <Param name="BeamWidthNS"><double>270</double>
      The beam width in nanoseconds only needed if TimeDist
      is a beam option
    </Param>
  </Config>

  <Config name="CCMBuildAccumWaveform" version="default">
    <Param name="TriggerType"><string>MC</string>
      Only look at triggers with name passed.
      Options are:
       - MC
       - BEAM
       - STROBE
       - LED
       - ALL
      and any combination of the three, like BEAM STROBE
    </Param>
    <Param name="BuildMethods"><string>CCMAccumWaveformTriangle CCMAccumWaveformTrianglePulseCut</string>
      The build methods to use. Options are:
      CCMAccumWaveformTriangle
      CCMAccumWaveformTrianglePulseCut
      CCMAccumWaveformStart
      CCMAccumWaveformStartPulseCut
    </Param>
    <Param name="PulseTimeLowValue"><double>-9920</double>
      The earliest in the DAQ window to allow the pulse to start in ns
      Only needed if BuildMethod contains at least one PulseCut
    </Param>
    <Param name="PulseTimeHighValue"><double>-200</double>
      The latest in the DAQ window to allow the pulse to start in ns
      Only needed if BuildMethod contains at least one PulseCut
    </Param>
  </Config>

  <Config name="CCMStrobeOverlay" version="default">
    <Param name="FileList"><string>/users/rtthorn/CCMCode/CCM_analysis_sw_dev_xmlConfig/build/txtFiles/strobeAccumWFFiles.txt</string>
      Name of file that has a list of strobe data to overlay ontop
      of the MC
    </Param>
  </Config>

  <Config name="CCMFindEvents" version="dynamic">
    <Param name="Threshold"><double> 0.2 </double>
      The PE threshold for a 2ns bin to trigger event building
    </Param>
    <Param name="ResetEvents"><int>1</int>
      Flag to reset the Events class. Should only be used in the first instance of CCMFindEvents
    </Param>
    <Param name="AccumWaveformMethodID"><string>CCMAccumWaveformTriangle</string>
      Which CCMAccumWaveformMethod to use in finding the events
    </Param>
    <Param name="EventFinderID"><string>CCMDynamicLengthEvent</string>
      Which CCMEvnetFinderID to use in finding the events options:
      CCMDynamicLengthEvent
      CCMFixedLengthEvent
    </Param>
    <Param name="FixedLength"><int>0</int>
      Number of bins for the required length of the event only needed if 
      EventFinderID == CCMFixedLengthEvent
    </Param>
  </Config>

  <Config name="CCMFindEvents" version="dynamic_pulseCut">
    <Param name="Threshold"><double> 0.2 </double>
      The PE threshold for a 2ns bin to trigger event building
    </Param>
    <Param name="ResetEvents"><int>0</int>
      Flag to reset the Events class. Should only be used in the first instance of CCMFindEvents
    </Param>
    <Param name="AccumWaveformMethodID"><string>CCMAccumWaveformTrianglePulseCut</string>
      Which CCMAccumWaveformMethod to use in finding the events
    </Param>
    <Param name="EventFinderID"><string>CCMDynamicLengthEvent</string>
      Which CCMEvnetFinderID to use in finding the events options:
      CCMDynamicLengthEvent
      CCMFixedLengthEvent
    </Param>
    <Param name="FixedLength"><int>0</int>
      Number of bins for the required length of the event only needed if 
      EventFinderID == CCMFixedLengthEvent
    </Param>
  </Config>

  <Config name="CCMNa22Cuts" version="lengthCut">
    <Param name="AccumWaveformMethodID"><string>CCMAccumWaveformTriangle</string>
      Which CCMAccumWaveformMethod to use in finding the events. 
      Options are:
       - CCMAccumWaveformTriangle
       - CCMAccumWaveformTrianglePulseCut
       - CCMAccumWaveformStart
       - CCMAccumWaveformStartPulseCut
    </Param>
    <Param name="EventFinderID"><string>CCMDynamicLengthEvent</string>
      Which CCMEvnetFinderID to use in finding the events options:
       - CCMDynamicLengthEvent
       - CCMFixedLengthEvent
    </Param>
    <Param name="TreeName"><string>tree_lengthCut</string>
      Name of the output tree
    </Param>
    <Param name="RemoveOtherEvents"><int>0</int>
      Flag to remove events that were not built with the 
      AccumWaveformMethodID/EventFinderID combination that 
      is looked for
    </Param>
    <Param name="RemovePrimaryEvents"><int>1</int>
      Flag to remove events match the
      AccumWaveformMethodID/EventFinderID combination that 
      is looked for but do not pass cuts
    </Param>
    <Param name="DoPrevCut"><int>1</int>
      Flag to reject events based off previous activity in the same DAQ window
    </Param>
    <Param name="PrevCutTime"><double>4800</double>
      The time to reject the event if a previous event falls before by the amount specified.
      The time should be in nanoseconds 
    </Param>
    <Param name="PrevCutHoldOff"><double>900</double>
      Hold off time (or offset time), the previous event has to end before this time for it to not reject the event
      The time should be in nanoseconds 
    </Param>
    <Param name="DoNicenessCut"><int>1</int>
      Flag to reject the event if the charge distribution is not "nice"
    </Param>
    <Param name="NicenessCutValueLow"><double>0</double>
      Lowest event niceness value allowed (not needed if DoNicenessCut = false)
    </Param>
    <Param name="NicenessCutValueHigh"><double>2.5</double>
      Highest event niceness value allowed (not needed if DoNicenessCut = false)
    </Param>
    <Param name="DoVetoCut"><int>1</int>
      Flag to turn on veto cut (0 = off, anything else = on)
    </Param>
    <Param name="NumVetoCut"><int>3</int>
      Number of veto tubes to cut on (not needed if DoVetoCut = false)
    </Param>
    <Param name="ReverseVeto"><int>0</int>
      Flag to reverse the veto cut or not (not needed if DoVetoCut = false)
      Normally events are cut if grater than or equal to NumVetoCut
      if ReverseVeto = 1 then events less than NumVetoCut would be removed
    </Param>
    <Param name="DoEnergyCut"><int>0</int>
      Flag to turn on prompt energy cut (0 = off, anything else = on)
    </Param>
    <Param name="EnergyCutValueLow"><double>10</double>
      Lowest prompt energy value allowed in PEs (not needed if DoEnergyCut = false)
    </Param>
    <Param name="EnergyCutValueHigh"><double>100</double>
      Highest prompt energy value allowed in PEs (not needed if DoEnergyCut = false)
    </Param>
    <Param name="WaveformMaxCut"><int>0</int>
      Flag if true will reject events if max of waveform is not in the prompt region
    </Param>
    <Param name="DoPositionCut"><int>1</int>
      Flag to turn on a position cut (0 = off, anything else = on)
    </Param>
    <Param name="RadiusCutValueLow"><double>0</double>
      Lowest radius value allowed in meters (not needed if DoPositionCut = false)
    </Param>
    <Param name="RadiusCutValueHigh"><double>0.95</double>
      Highest radius value allowed in meters (not needed if DoPositionCut = false)
      0.05 for Na22 calibration
    </Param>
    <Param name="ZCutValueLow"><double>-0.4</double>
      Lowest z-position value allowed in meters (not needed if DoPositionCut = false)
      -0.2 for Na22 calibration
    </Param>
    <Param name="ZCutValueHigh"><double>0.4</double>
      Highest z-position value allowed in meters (not needed if DoPositionCut = false)
      0.05 for Na22 calibration
    </Param>
    <Param name="DoTimeCut"><int>1</int>
      Flag to turn on DAQ Time cut (0 = off, anything else = on)
    </Param>
    <Param name="TimeCutValueLow"><double>-7000</double>
      Lowest DAQ time value allowed in nanoseconds (not needed if DoTimeCut = false)
    </Param>
    <Param name="TimeCutValueHigh"><double>4000</double>
      Highest DAQ time value allowed in nanoseconds (not needed if DoTimeCut = false)
    </Param>
    <Param name="DoLengthCut"><int>0</int>
      Flag to turn on event length cut (0 = off, anything else = on)
    </Param>
    <Param name="LengthCutValueLow"><double>0</double>
      Lowest event length value allowed in nanoseconds (not needed if DoLengthCut = false)
    </Param>
    <Param name="LengthCutValueHigh"><double>100</double>
      Highest event length value allowed in nanoseconds (not needed if DoLengthCut = false)
    </Param>
    <Param name="DoBCMCut"><int>0</int>
      Flag to reject events based off the BCM cut
    </Param>
    <Param name="BCMTimeLowCut"><double>-377.39</double>
      Low cut on the time the BCM signal was seen in the DAQ in ns
      Only needed if DoBCMCut is true
    </Param>
    <Param name="BCMTimeHighCut"><double>-314.15</double>
      High cut on the time the BCM signal was seen in the DAQ in ns
      Only needed if DoBCMCut is true
    </Param>
    <Param name="BCMLengthLowCut"><double>505.5</double>
      Low cut on the length the BCM signal in the DAQ in ns
      Only needed if DoBCMCut is true
    </Param>
    <Param name="BCMLengthHighCut"><double>646.5</double>
      High cut on the length the BCM signal in the DAQ in ns
      Only needed if DoBCMCut is true
    </Param>
    <Param name="BCMIntegralLowCut"><double>17811.4</double>
      Low cut on the integral the BCM signal in the DAQ in ADC
      Only needed if DoBCMCut is true
    </Param>
    <Param name="BCMIntegralHighCut"><double>30978.4</double>
      High cut on the integral the BCM signal in the DAQ in ADC
      Only needed if DoBCMCut is true
    </Param>
  </Config>

  <Config name="CCMNa22Cuts" version="waveformCut">
    <Param name="AccumWaveformMethodID"><string>CCMAccumWaveformTriangleCut</string>
      Which CCMAccumWaveformMethod to use in finding the events. 
      Options are:
       - CCMAccumWaveformTriangle
       - CCMAccumWaveformTrianglePulseCut
       - CCMAccumWaveformStart
       - CCMAccumWaveformStartPulseCut
    </Param>
    <Param name="EventFinderID"><string>CCMDynamicLengthEvent</string>
      Which CCMEvnetFinderID to use in finding the events options:
       - CCMDynamicLengthEvent
       - CCMFixedLengthEvent
    </Param>
    <Param name="TreeName"><string>tree_waveformCut</string>
      Name of the output tree
    </Param>
    <Param name="RemoveOtherEvents"><int>0</int>
      Flag to remove events that were not built with the 
      AccumWaveformMethodID/EventFinderID combination that 
      is looked for
    </Param>
    <Param name="RemovePrimaryEvents"><int>1</int>
      Flag to remove events match the
      AccumWaveformMethodID/EventFinderID combination that 
      is looked for but do not pass cuts
    </Param>
    <Param name="DoPrevCut"><int>1</int>
      Flag to reject events based off previous activity in the same DAQ window
    </Param>
    <Param name="PrevCutTime"><double>4800</double>
      The time to reject the event if a previous event falls before by the amount specified.
      The time should be in nanoseconds 
    </Param>
    <Param name="PrevCutHoldOff"><double>900</double>
      Hold off time (or offset time), the previous event has to end before this time for it to not reject the event
      The time should be in nanoseconds 
    </Param>
    <Param name="DoNicenessCut"><int>1</int>
      Flag to reject the event if the charge distribution is not "nice"
    </Param>
    <Param name="NicenessCutValueLow"><double>0</double>
      Lowest event niceness value allowed (not needed if DoNicenessCut = false)
    </Param>
    <Param name="NicenessCutValueHigh"><double>2.5</double>
      Highest event niceness value allowed (not needed if DoNicenessCut = false)
    </Param>
    <Param name="DoVetoCut"><int>1</int>
      Flag to turn on veto cut (0 = off, anything else = on)
    </Param>
    <Param name="NumVetoCut"><int>3</int>
      Number of veto tubes to cut on (not needed if DoVetoCut = false)
    </Param>
    <Param name="ReverseVeto"><int>0</int>
      Flag to reverse the veto cut or not (not needed if DoVetoCut = false)
      Normally events are cut if grater than or equal to NumVetoCut
      if ReverseVeto = 1 then events less than NumVetoCut would be removed
    </Param>
    <Param name="DoEnergyCut"><int>0</int>
      Flag to turn on prompt energy cut (0 = off, anything else = on)
    </Param>
    <Param name="EnergyCutValueLow"><double>10</double>
      Lowest prompt energy value allowed in PEs (not needed if DoEnergyCut = false)
    </Param>
    <Param name="EnergyCutValueHigh"><double>100</double>
      Highest prompt energy value allowed in PEs (not needed if DoEnergyCut = false)
    </Param>
    <Param name="WaveformMaxCut"><int>1</int>
      Flag if true will reject events if max of waveform is not in the prompt region
    </Param>
    <Param name="DoPositionCut"><int>1</int>
      Flag to turn on a position cut (0 = off, anything else = on)
    </Param>
    <Param name="RadiusCutValueLow"><double>0</double>
      Lowest radius value allowed in meters (not needed if DoPositionCut = false)
    </Param>
    <Param name="RadiusCutValueHigh"><double>0.95</double>
      Highest radius value allowed in meters (not needed if DoPositionCut = false)
      0.05 for Na22 calibration
    </Param>
    <Param name="ZCutValueLow"><double>-0.4</double>
      Lowest z-position value allowed in meters (not needed if DoPositionCut = false)
      -0.2 for Na22 calibration
    </Param>
    <Param name="ZCutValueHigh"><double>0.4</double>
      Highest z-position value allowed in meters (not needed if DoPositionCut = false)
      0.05 for Na22 calibration
    </Param>
    <Param name="DoTimeCut"><int>1</int>
      Flag to turn on DAQ Time cut (0 = off, anything else = on)
    </Param>
    <Param name="TimeCutValueLow"><double>-7000</double>
      Lowest DAQ time value allowed in nanoseconds (not needed if DoTimeCut = false)
    </Param>
    <Param name="TimeCutValueHigh"><double>4000</double>
      Highest DAQ time value allowed in nanoseconds (not needed if DoTimeCut = false)
    </Param>
    <Param name="DoLengthCut"><int>0</int>
      Flag to turn on event length cut (0 = off, anything else = on)
    </Param>
    <Param name="LengthCutValueLow"><double>0</double>
      Lowest event length value allowed in nanoseconds (not needed if DoLengthCut = false)
    </Param>
    <Param name="LengthCutValueHigh"><double>100</double>
      Highest event length value allowed in nanoseconds (not needed if DoLengthCut = false)
    </Param>
    <Param name="DoBCMCut"><int>0</int>
      Flag to reject events based off the BCM cut
    </Param>
    <Param name="BCMTimeLowCut"><double>-377.39</double>
      Low cut on the time the BCM signal was seen in the DAQ in ns
      Only needed if DoBCMCut is true
    </Param>
    <Param name="BCMTimeHighCut"><double>-314.15</double>
      High cut on the time the BCM signal was seen in the DAQ in ns
      Only needed if DoBCMCut is true
    </Param>
    <Param name="BCMLengthLowCut"><double>505.5</double>
      Low cut on the length the BCM signal in the DAQ in ns
      Only needed if DoBCMCut is true
    </Param>
    <Param name="BCMLengthHighCut"><double>646.5</double>
      High cut on the length the BCM signal in the DAQ in ns
      Only needed if DoBCMCut is true
    </Param>
    <Param name="BCMIntegralLowCut"><double>17811.4</double>
      Low cut on the integral the BCM signal in the DAQ in ADC
      Only needed if DoBCMCut is true
    </Param>
    <Param name="BCMIntegralHighCut"><double>30978.4</double>
      High cut on the integral the BCM signal in the DAQ in ADC
      Only needed if DoBCMCut is true
    </Param>
  </Config>

</TestRecoConfig>
